<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>From Pederson to... Peeke and Wanner</title>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #f5f1e8;
            color: #2a2a2a;
            overflow-x: hidden;
        }

        .header {
            position: sticky;
            top: 0;
            background: #2a2a2a;
            color: #f5f1e8;
            padding: 20px;
            text-align: center;
            z-index: 100;
            border-bottom: 4px solid #ffb81c;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .intro {
            max-width: 700px;
            margin: 80px auto;
            padding: 0 30px;
            text-align: center;
        }

        .intro h2 {
            font-size: 42px;
            margin-bottom: 30px;
            line-height: 1.2;
        }

        .intro p {
            font-size: 20px;
            line-height: 1.6;
            color: #555;
        }

        .timeline-container {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
            padding: 100px 30px;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #d4d4d4;
            transform: translateX(-50%);
        }

        .trade-event {
            position: relative;
            margin-bottom: 180px;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .trade-event.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .date-marker {
            position: absolute;
            left: 50%;
            top: -10px;
            transform: translateX(-50%);
            background: #2a2a2a;
            color: #ffb81c;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 14px;
            z-index: 2;
            white-space: nowrap;
        }

        .trade-icon {
            position: absolute;
            left: 50%;
            top: 35px;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: #ffb81c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            z-index: 2;
            border: 4px solid #f5f1e8;
        }

        .trade-icon.draft {
            background: #4a90e2;
        }

        .connection-line {
            position: absolute;
            left: 50%;
            top: 85px;
            width: 3px;
            height: 70px;
            background: #ffb81c;
            transform: translateX(-50%);
            z-index: 1;
        }

        .connection-line.draft {
            background: #4a90e2;
        }

        .trade-content {
            display: flex;
            justify-content: space-between;
            margin-top: 105px;
            gap: 40px;
        }

        .team-box {
            flex: 1;
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .team-box.left {
            margin-right: 50px;
        }

        .team-box.right {
            margin-left: 50px;
        }

        .team-box.center {
            margin: 0 auto;
            max-width: 500px;
        }

        .team-name {
            font-weight: 700;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-logo {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }

        .player-item {
            margin: 12px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
            border-left: 3px solid #ffb81c;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .player-item:hover {
            background: #f0f0f0;
        }

        .player-item.current-asset {
            background: #fff3cd;
            border-left: 3px solid #28a745;
        }

        .player-item.current-asset:hover {
            background: #ffe8a1;
        }

        .player-headshot {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            background: #e0e0e0;
            flex-shrink: 0;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .player-detail {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
        }

        .stats-icon {
            font-size: 20px;
            color: #666;
            flex-shrink: 0;
        }

        .trade-note {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4f8;
            border-left: 4px solid #4a90e2;
            border-radius: 4px;
            font-size: 14px;
            color: #555;
            font-style: italic;
        }

        /* Lightbox styles */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            background: white;
            border-radius: 12px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .lightbox-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #2a2a2a;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            background: #ffb81c;
        }

        .lightbox-header {
            padding: 30px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .lightbox-headshot {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            background: #e0e0e0;
        }

        .lightbox-player-info h2 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .lightbox-player-info p {
            color: #666;
            font-size: 16px;
        }

        .lightbox-body {
            padding: 30px;
        }

        .stats-section {
            margin-bottom: 25px;
        }

        .stats-section h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #2a2a2a;
            border-bottom: 2px solid #ffb81c;
            padding-bottom: 8px;
        }

        .season-stats {
            margin-bottom: 10px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .season-info {
            flex: 1;
        }

        .season-year {
            font-weight: 700;
            color: #2a2a2a;
            margin-bottom: 2px;
        }

        .season-team {
            color: #666;
            font-size: 12px;
        }

        .season-stats-line {
            color: #2a2a2a;
            font-family: 'Courier New', monospace;
            white-space: nowrap;
        }

        .loading-stats {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .outro {
            max-width: 700px;
            margin: 100px auto 80px;
            padding: 0 30px;
            text-align: center;
        }

        .outro h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .outro p {
            font-size: 18px;
            line-height: 1.6;
            color: #555;
        }

        @media (max-width: 768px) {
            .trade-content {
                flex-direction: column;
            }

            .team-box.left,
            .team-box.right {
                margin: 0;
            }

            .timeline-line {
                left: 30px;
            }

            .date-marker,
            .trade-icon {
                left: 30px;
            }

            .connection-line {
                left: 30px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
<div class="header">
<h1>From Pederson to... Peeke and Wanner</h1>
</div>
<div class="intro">
<h2>The Trade Tree That Changed the Bruins</h2>
<p>In June 1985, the Boston Bruins traded Barry Pederson to Vancouver for Cam Neely and a first-round pick. What happened next is one of the most remarkable trade trees in NHL history.</p>
</div>
<div class="timeline-container">
<div class="timeline-line"></div>
<!-- Trade 1: 1985 -->
<div class="trade-event" data-event="1">
<div class="date-marker">Jun 6, 1985</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="VAN" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/VAN_light.svg"/>
                        To Vancouver Canucks
                    </div>
<div class="player-item" data-player="barry-pederson">
<img alt="Barry Pederson" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8445482.jpg"/>
<div class="player-info">
<div class="player-name">Barry Pederson</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item" data-player="cam-neely">
<img alt="Cam Neely" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8447947.jpg"/>
<div class="player-info">
<div class="player-name">Cam Neely</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 1987</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 2: 1987 -->
<div class="trade-event" data-event="2">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 13, 1987</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from Vancouver)
                    </div>
<div class="player-item" data-player="glen-wesley">
<img alt="Glen Wesley" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8451539.jpg"/>
<div class="player-info">
<div class="player-name">Glen Wesley</div>
<div class="player-detail">1st round (3rd overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 3: 1994 -->
<div class="trade-event" data-event="3">
<div class="connection-line"></div>
<div class="date-marker">Aug 26, 1994</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="HFD" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/CAR_light.svg"/>
                        To Hartford Whalers
                    </div>
<div class="player-item" data-player="glen-wesley">
<img alt="Glen Wesley" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8451539.jpg"/>
<div class="player-info">
<div class="player-name">Glen Wesley</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 1995</div>
</div>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 1996</div>
</div>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 1997</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 4: 1995 -->
<div class="trade-event" data-event="4">
<div class="connection-line draft"></div>
<div class="date-marker">Jul 8, 1995</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from Hartford)
                    </div>
<div class="player-item" data-player="kyle-mclaren">
<img alt="Kyle McLaren" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8467840.jpg"/>
<div class="player-info">
<div class="player-name">Kyle McLaren</div>
<div class="player-detail">1st round (9th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 5: 1996 -->
<div class="trade-event" data-event="5">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 22, 1996</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from Hartford)
                    </div>
<div class="player-item" data-player="johnathan-aitken">
<img alt="Johnathan Aitken" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8468073.jpg"/>
<div class="player-info">
<div class="player-name">Johnathan Aitken</div>
<div class="player-detail">1st round (8th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 6: 1997 -->
<div class="trade-event" data-event="6">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 21, 1997</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from Hartford)
                    </div>
<div class="player-item" data-player="sergei-samsonov">
<img alt="Sergei Samsonov" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8459436.jpg"/>
<div class="player-info">
<div class="player-name">Sergei Samsonov</div>
<div class="player-detail">1st round (8th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 7: 2003 -->
<div class="trade-event" data-event="7">
<div class="connection-line"></div>
<div class="date-marker">Jun 24, 2003</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="SJS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/SJS_light.svg"/>
                        To San Jose Sharks
                    </div>
<div class="player-item" data-player="kyle-mclaren">
<img alt="Kyle McLaren" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8467840.jpg"/>
<div class="player-info">
<div class="player-name">Kyle McLaren</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">4th round draft pick 2004</div>
</div>
</div>
<div class="player-item" data-player="jeff-jillson">
<img alt="Jeff Jillson" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470186.jpg"/>
<div class="player-info">
<div class="player-name">Jeff Jillson</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item" data-player="jeff-hackett">
<img alt="Jeff Hackett" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8450293.jpg"/>
<div class="player-info">
<div class="player-name">Jeff Hackett</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 8: 2004 -->
<div class="trade-event" data-event="8">
<div class="connection-line"></div>
<div class="date-marker">Mar 9, 2004</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="SJS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/SJS_light.svg"/>
                        To San Jose Sharks
                    </div>
<div class="player-item" data-player="jeff-jillson">
<img alt="Jeff Jillson" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470186.jpg"/>
<div class="player-info">
<div class="player-name">Jeff Jillson</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item" data-player="brad-boyes">
<img alt="Brad Boyes" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470828.jpg"/>
<div class="player-info">
<div class="player-name">Brad Boyes</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 9: 2006 -->
<div class="trade-event" data-event="9">
<div class="connection-line"></div>
<div class="date-marker">Mar 9, 2006</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="EDM" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/EDM_light.svg"/>
                        To Edmonton Oilers
                    </div>
<div class="player-item" data-player="sergei-samsonov">
<img alt="Sergei Samsonov" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8459436.jpg"/>
<div class="player-info">
<div class="player-name">Sergei Samsonov</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item" data-player="marty-reasoner">
<img alt="Marty Reasoner" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8467911.jpg"/>
<div class="player-info">
<div class="player-name">Marty Reasoner</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item" data-player="yan-stastny">
<img alt="Yan Stastny" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8471230.jpg"/>
<div class="player-info">
<div class="player-name">Yan Stastny</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">2nd round draft pick 2006</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 10: 2006 Draft -->
<div class="trade-event" data-event="10">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 24, 2006</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from Edmonton)
                    </div>
<div class="player-item" data-player="milan-lucic">
<img alt="Milan Lucic" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8473419.jpg"/>
<div class="player-info">
<div class="player-name">Milan Lucic</div>
<div class="player-detail">2nd round (50th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 11: 2007 -->
<div class="trade-event" data-event="11">
<div class="connection-line"></div>
<div class="date-marker">Jan 18, 2007</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="STL" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/STL_light.svg"/>
                        To St. Louis Blues
                    </div>
<div class="player-item" data-player="yan-stastny">
<img alt="Yan Stastny" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8471230.jpg"/>
<div class="player-info">
<div class="player-name">Yan Stastny</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">5th round draft pick 2007</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 12: 2007 Feb -->
<div class="trade-event" data-event="12">
<div class="connection-line"></div>
<div class="date-marker">Feb 27, 2007</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="STL" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/STL_light.svg"/>
                        To St. Louis Blues
                    </div>
<div class="player-item" data-player="brad-boyes">
<img alt="Brad Boyes" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470828.jpg"/>
<div class="player-info">
<div class="player-name">Brad Boyes</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item" data-player="dennis-wideman">
<img alt="Dennis Wideman" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470940.jpg"/>
<div class="player-info">
<div class="player-name">Dennis Wideman</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 13: 2007 Jun -->
<div class="trade-event" data-event="13">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 23, 2007</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from St. Louis)
                    </div>
<div class="player-item" data-player="denis-reul">
<img alt="Denis Reul" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">Denis Reul</div>
<div class="player-detail">5th round (130th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 14: 2010 -->
<div class="trade-event" data-event="14">
<div class="connection-line"></div>
<div class="date-marker">Jun 25, 2010</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="FLA" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/FLA_light.svg"/>
                        To Florida Panthers
                    </div>
<div class="player-item" data-player="dennis-wideman">
<img alt="Dennis Wideman" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470940.jpg"/>
<div class="player-info">
<div class="player-name">Dennis Wideman</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 2010</div>
</div>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">3rd round draft pick 2011</div>
</div>
</div>
<div class="player-item" data-player="nathan-horton">
<img alt="Nathan Horton" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8471239.jpg"/>
<div class="player-info">
<div class="player-name">Nathan Horton</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item" data-player="gregory-campbell">
<img alt="Gregory Campbell" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8470277.jpg"/>
<div class="player-info">
<div class="player-name">Gregory Campbell</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 15: 2015 Jan -->
<div class="trade-event" data-event="15">
<div class="connection-line"></div>
<div class="date-marker">Jan 26, 2015</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="LAK" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/LAK_light.svg"/>
                        To Los Angeles Kings
                    </div>
<div class="player-item" data-player="milan-lucic">
<img alt="Milan Lucic" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8473419.jpg"/>
<div class="player-info">
<div class="player-name">Milan Lucic</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item" data-player="martin-jones">
<img alt="Martin Jones" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8474889.jpg"/>
<div class="player-info">
<div class="player-name">Martin Jones</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item" data-player="colin-miller">
<img alt="Colin Miller" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8476396.jpg"/>
<div class="player-info">
<div class="player-name">Colin Miller</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 2015</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 16: 2015 Jun -->
<div class="trade-event" data-event="16">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 26, 2015</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from Los Angeles)
                    </div>
<div class="player-item" data-player="jakub-zboril">
<img alt="Jakub Zboril" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8478414.jpg"/>
<div class="player-info">
<div class="player-name">Jakub Zboril</div>
<div class="player-detail">1st round (15th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 17: 2016 -->
<div class="trade-event" data-event="17">
<div class="connection-line"></div>
<div class="date-marker">Jan 30, 2016</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="SJS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/SJS_light.svg"/>
                        To San Jose Sharks
                    </div>
<div class="player-item" data-player="martin-jones">
<img alt="Martin Jones" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8474889.jpg"/>
<div class="player-info">
<div class="player-name">Martin Jones</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item" data-player="sean-kuraly">
<img alt="Sean Kuraly" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8476374.jpg"/>
<div class="player-info">
<div class="player-name">Sean Kuraly</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">1st round draft pick 2016</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 18: 2016 Draft -->
<div class="trade-event" data-event="18">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 24, 2016</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (from San Jose)
                    </div>
<div class="player-item" data-player="trent-frederic">
<img alt="Trent Frederic" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8479403.jpg"/>
<div class="player-info">
<div class="player-name">Trent Frederic</div>
<div class="player-detail">1st round (29th overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
<!-- Trade 19: 2024 -->
<div class="trade-event" data-event="19">
<div class="connection-line"></div>
<div class="date-marker">Mar 8, 2024</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="CBJ" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/CBJ_light.svg"/>
                        To Columbus Blue Jackets
                    </div>
<div class="player-item" data-player="jakub-zboril">
<img alt="Jakub Zboril" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8478414.jpg"/>
<div class="player-info">
<div class="player-name">Jakub Zboril</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item current-asset" data-player="andrew-peeke">
<img alt="Andrew Peeke" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/8478498.jpg"/>
<div class="player-info">
<div class="player-name">Andrew Peeke</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item current-asset">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">3rd round draft pick 2027</div>
</div>
</div>
</div>
</div>
</div>
<!-- Trade 20: 2025 -->
<div class="trade-event" data-event="20">
<div class="connection-line"></div>
<div class="date-marker">Mar 5, 2025</div>
<div class="trade-icon">⇄</div>
<div class="trade-content">
<div class="team-box left">
<div class="team-name">
<img alt="NJD" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/NJD_light.svg"/>
                        To New Jersey Devils
                    </div>
<div class="player-item" data-player="shane-lachance">
<img alt="Shane Lachance" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">Shane Lachance</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
<div class="team-box right">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        To Boston Bruins
                    </div>
<div class="player-item current-asset" data-player="maximus-wanner">
<img alt="Maximus Wanner" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">Maximus Wanner</div>
</div>
<span class="stats-icon">📊</span>
</div>
<div class="player-item current-asset">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">2nd round draft pick 2025 (via St. Louis)</div>
</div>
</div>
<div class="player-item current-asset">
<img alt="Draft Pick" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">4th round draft pick 2026</div>
</div>
</div>
</div>
</div>
<div class="trade-note">
                Three-team trade: Trent Frederic, Petr Hauser, and Max Jones went to Edmonton Oilers
            </div>
</div>
<!-- Trade 21: 2025 Draft -->
<div class="trade-event" data-event="21">
<div class="connection-line draft"></div>
<div class="date-marker">Jun 28, 2025</div>
<div class="trade-icon draft">📋</div>
<div class="trade-content">
<div class="team-box center">
<div class="team-name">
<img alt="BOS" class="team-logo" src="https://assets.nhle.com/logos/nhl/svg/BOS_light.svg"/>
                        Boston drafts (via St. Louis)
                    </div>
<div class="player-item current-asset" data-player="william-moore">
<img alt="William Moore" class="player-headshot" src="https://cms.nhl.bamgrid.com/images/headshots/current/168x168/skater.jpg"/>
<div class="player-info">
<div class="player-name">William Moore</div>
<div class="player-detail">2nd round (51st overall)</div>
</div>
<span class="stats-icon">📊</span>
</div>
</div>
</div>
</div>
</div>
<div class="outro">
<h2>40 Years of Hockey History</h2>
<p>From one trade in 1985, the Boston Bruins created a web of transactions spanning four decades. Hall of Famer Cam Neely, key pieces of the 2011 Stanley Cup team, and dozens of draft picks—all traced back to Barry Pederson.</p>
</div>
<!-- Lightbox -->
<div class="lightbox" id="lightbox">
<div class="lightbox-content">
<button class="lightbox-close" onclick="closeLightbox()">×</button>
<div class="lightbox-header">
<img alt="" class="lightbox-headshot" id="lightbox-headshot" src=""/>
<div class="lightbox-player-info">
<h2 id="lightbox-name"></h2>
<p id="lightbox-position"></p>
</div>
</div>
<div class="lightbox-body">
<div class="stats-section">
<h3>Career Statistics</h3>
<div class="stats-grid" id="stats-grid"></div>
</div>
</div>
</div>
</div>
<!--
  Proxy-aware loader for NHL data (images + season stats)
  HOW TO USE:
  1) Deploy the Cloudflare Worker from my previous message (or any CORS proxy you control).
  2) Set PROXY below to your worker URL. Example: 'https://bruins-proxy.workers.dev'
  3) Optional: keep stats_cache.json in the same folder for guaranteed offline/local fallback.
-->
<script>
(function(){
  const PROXY = 'https://pederson-neely.ariswinkleman.workers.dev'; // <-- REPLACE with your Worker URL
  const NHL_STAT = PROXY ? `${PROXY}/nhl-stats` : 'https://statsapi.web.nhl.com';
  const NHL_WEB  = PROXY ? `${PROXY}/nhl-web`  : 'https://api-web.nhle.com';
  const ESPN     = PROXY ? `${PROXY}/espn`     : 'https://site.api.espn.com';
  const HEADSHOT = (id, size=168) => `https://cms.nhl.bamgrid.com/images/headshots/current/${size}x${size}/${id}.jpg`;
  const PLACEHOLDER = 'https://via.placeholder.com/168?text=No+Image';

  const PLAYER_ID = {
    "Cam Neely": 8449812,
    "Barry Pederson": 8450271,
    "Glen Wesley": 8452371,
    "Kyle McLaren": 8462040,
    "Sergei Samsonov": 8466035,
    "Jeff Hackett": 8447449,
    "Brad Boyes": 8468504,
    "Milan Lucic": 8473473,
    "Martin Jones": 8474889,
    "Jeff Jillson": 8467887,
    "Marty Reasoner": 8464967,
    "Yan Stastny": 8470223,
    "Dennis Wideman": 8469770,
    "Nathan Horton": 8470596,
    "Gregory Campbell": 8470169
  };

  function seasonPretty(y8){ return y8 && y8.length===8 ? `${y8.slice(0,4)}-${y8.slice(4)}` : (y8||''); }
  function isGoalie(name, posText=''){ return /goal/i.test(posText) || /\b(Jeff Hackett|Martin Jones)\b/i.test(name); }
  function el(id){ return document.getElementById(id); }

  async function fetchJSON(url, {timeoutMs=9000} = {}){
    const ctrl = new AbortController();
    const t = setTimeout(()=>ctrl.abort(), timeoutMs);
    try{
      const res = await fetch(url, {signal: ctrl.signal, credentials: 'omit'});
      if(!res.ok) throw new Error(`${res.status} ${res.statusText}`);
      return await res.json();
    } finally { clearTimeout(t); }
  }

  async function getPlayerPhotoUrl(name, fallbackThumb){
    const id = PLAYER_ID[name] || await findNhlPersonId(name).catch(()=>null);
    if (id){
      return HEADSHOT(id, 168);
    }
    try{
      const j = await fetchJSON(`https://www.thesportsdb.com/api/v1/json/123/searchplayers.php?p=${encodeURIComponent(name)}`, {timeoutMs:7000});
      const p = j && j.player && j.player[0];
      if (p){
        if (p.strCutout) return p.strCutout;
        if (p.strThumb) return p.strThumb;
      }
    }catch{}
    return fallbackThumb || PLACEHOLDER;
  }

  async function getSeasonStats(name){
    const id = PLAYER_ID[name] || await findNhlPersonId(name);
    if (!id) throw new Error(\"Couldn't resolve player ID.\");

    // NHL Stats yearByYear
    try{
      const data = await fetchJSON(`${NHL_STAT}/api/v1/people/${id}/stats?stats=yearByYear`);
      const splits = data?.stats?.[0]?.splits || [];
      const nhl = splits.filter(s => (s.league?.name||'').toLowerCase().includes('national hockey league'));
      if (nhl.length){
        return nhl.map(s => ({
          season: seasonPretty(s.season),
          team: s.team?.name || '',
          gp: s.stat?.games ?? 0,
          g:  s.stat?.goals ?? 0,
          a:  s.stat?.assists ?? 0,
          pim: s.stat?.pim ?? 0,
          pm:  s.stat?.plusMinus
        }));
      }
    }catch(e){}

    // api-web fallback (aggregate)
    try{
      const now = new Date();
      const cur = (now.getMonth()>=6 ? now.getFullYear() : now.getFullYear()-1);
      const rows = [];
      for (let y = 1980; y <= cur; y++){
        const season = `${y}${y+1}`;
        try{
          const j = await fetchJSON(`${NHL_WEB}/player/${id}/game-log/${season}/2`, {timeoutMs:7000});
          const games = j?.gameLog || j || [];
          if (!games.length) continue;
          const team = games[0]?.teamName || games[0]?.teamAbbrev || '';
          let gp=0,g=0,a=0,pim=0,pm=null;
          for (const gme of games){
            gp++;
            g += gme?.goals ?? gme?.g ?? 0;
            a += gme?.assists ?? gme?.a ?? 0;
            pim += gme?.pim ?? 0;
            if (typeof gme?.plusMinus === 'number') pm = (pm ?? 0) + gme.plusMinus;
          }
          if (gp) rows.push({season: seasonPretty(season), team, gp, g, a, pim, pm});
        }catch{}
      }
      if (rows.length) return rows;
    }catch(e){}

    // Local cache fallback
    try{
      const cache = await fetchJSON('stats_cache.json', {timeoutMs:1500});
      if (cache && cache[name]) return cache[name];
    }catch{}

    throw new Error(\"No stats available from any source.\");
  }

  async function findNhlPersonId(name){
    try{
      const j = await fetchJSON(`${NHL_STAT}/api/v1/people?fullName=${encodeURIComponent(name)}`);
      const id = j?.people?.[0]?.id;
      if (id) return id;
    }catch{}
    try{
      const j = await fetchJSON(`${NHL_WEB}/search/player?culture=en-us&limit=10&q=${encodeURIComponent(name)}`);
      const hit = (j?.players||[]).find(p => (p?.name||'').toLowerCase() === name.toLowerCase()) || (j?.players||[])[0];
      if (hit?.id) return hit.id;
    }catch{}
    return null;
  }

  function renderRows(container, rows, goalie){
    container.innerHTML = '';
    if (!rows || !rows.length){
      container.innerHTML = `<div class="loading-stats">No stats found.</div>`;
      return;
    }
    for (const r of rows){
      const line = goalie
        ? `GP ${r.gp||0} | (Goalie stat line via logs to-do)`
        : `GP ${r.gp||0} | G ${r.g||0} | A ${r.a||0} | PTS ${(r.g||0)+(r.a||0)} | PIM ${r.pim||0}` + (r.pm!=null?` | +/- ${r.pm}`:'')
      const row = document.createElement('div');
      row.className = 'season-stats';
      row.innerHTML = `
        <div class="season-info">
          <div class="season-year">${r.season || ''}</div>
          <div class="season-team">${r.team || ''}</div>
        </div>
        <div class="season-stats-line">${line}</div>
      `;
      container.appendChild(row);
    }
  }

  function isGoalieName(name){ return /\b(Jeff Hackett|Martin Jones)\b/i.test(name); }

  async function openLightboxFor(item){
    const name = item.querySelector('.player-name')?.textContent?.trim() || '';
    const pos  = item.querySelector('.player-position')?.textContent?.trim() || '';
    const thumb = item.querySelector('img.player-headshot');
    const fallbackThumb = thumb?.src;

    const lb = document.getElementById('lightbox');
    const img = document.getElementById('lightbox-headshot');
    const nm  = document.getElementById('lightbox-name');
    const ps  = document.getElementById('lightbox-position');
    const grid= document.getElementById('stats-grid');

    nm.textContent = name;
    ps.textContent = pos || '';
    img.src = fallbackThumb || PLACEHOLDER;
    img.alt = name;
    grid.innerHTML = `<div class="loading-stats">Loading…</div>`;

    lb.classList.add('active');
    document.body.style.overflow = 'hidden';

    try{ img.src = await getPlayerPhotoUrl(name, fallbackThumb); }catch{}

    try{
      const rows = await getSeasonStats(name);
      renderRows(grid, rows, isGoalie(name,pos) || isGoalieName(name));
    }catch(e){
      grid.innerHTML = `<div class="loading-stats">${e && e.message ? e.message : 'No stats available.'}</div>`;
    }
  }

  document.addEventListener('click', (e)=>{
    const card = e.target.closest('.player-item[data-player]');
    if (!card) return;
    openLightboxFor(card);
  });

  // Close handlers
  const lb = document.getElementById('lightbox');
  if (lb){
    lb.addEventListener('click', (e)=>{ if (e.target === lb) { lb.classList.remove('active'); document.body.style.overflow='auto'; }});
  }
  document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') { lb?.classList.remove('active'); document.body.style.overflow='auto'; }});
})();
</script>
<script>
// --- Patch: switch to NHL WEB 'player landing' (per-season stats) and robust ID search ---
(function(){
  const PROXY = 'https://pederson-neely.ariswinkleman.workers.dev';
  const NHL_WEB  = `${PROXY}/nhl-web`;
  const NHL_STAT = `${PROXY}/nhl-stats`; // kept for fallback, but primary is landing
  const HEADSHOT = (id, size=168) => `https://cms.nhl.bamgrid.com/images/headshots/current/${size}x${size}/${id}.jpg`;

  // Prefer landing endpoint for season-by-season stats (includes team and per-season totals)
  window.getSeasonStats = async function(name){
    const id = (window.PLAYER_ID && window.PLAYER_ID[name]) || await window.findNhlPersonId(name);
    if (!id) throw new Error("Couldn't resolve player ID.");

    // 1) Try landing endpoint
    try{
      const resp = await fetch(`${NHL_WEB}/v1/player/${id}/landing`, {credentials:'omit'});
      if (resp.ok){
        const j = await resp.json();
        // Some variants use 'seasons' or 'seasonTotals'
        const seasons = j?.seasons || j?.seasonTotals || [];
        const rows = seasons.map(s => {
          // normalize fields
          const season = (s.seasonId || s.season || '').toString();
          const team = s.teamName || s.teamAbbrev || s.team || '';
          const gp = s.gamesPlayed ?? s.gp ?? s.games ?? 0;
          const g  = s.goals ?? s.g ?? 0;
          const a  = s.assists ?? s.a ?? 0;
          const pim= s.pim ?? 0;
          const pm = (typeof s.plusMinus === 'number') ? s.plusMinus : undefined;

          function seasonPretty(y8){ return y8 && y8.length===8 ? `${y8.slice(0,4)}-${y8.slice(4)}` : (y8||''); }
          return { season: seasonPretty(season), team, gp, g, a, pim, pm };
        }).filter(r => r.gp); // keep rows with games
        if (rows.length) return rows;
      }
    }catch(e){ /* continue to fallback */ }

    // 2) Fallback to stats yearByYear if landing failed completely
    try{
      const resp = await fetch(`${NHL_STAT}/api/v1/people/${id}/stats?stats=yearByYear`);
      if (resp.ok){
        const j = await resp.json();
        const splits = j?.stats?.[0]?.splits || [];
        const nhl = splits.filter(s => (s.league?.name||'').toLowerCase().includes('national hockey league'));
        if (nhl.length){
          const rows = nhl.map(s => ({
            season: (s.season && (s.season.slice(0,4)+'-'+s.season.slice(4))) || '',
            team: s.team?.name || '',
            gp: s.stat?.games ?? 0,
            g:  s.stat?.goals ?? 0,
            a:  s.stat?.assists ?? 0,
            pim: s.stat?.pim ?? 0,
            pm:  s.stat?.plusMinus
          }));
          return rows;
        }
      }
    }catch(e){}

    throw new Error("No stats available from landing or stats API.");
  };

  // More robust ID search: try NHL web search first (works even when stats origin is flaky)
  window.findNhlPersonId = async function(name){
    // api-web search
    try{
      const r = await fetch(`${NHL_WEB}/search/player?culture=en-us&limit=10&q=${encodeURIComponent(name)}`);
      if (r.ok){
        const j = await r.json();
        const hit = (j?.players||[]).find(p => (p?.name||'').toLowerCase() === name.toLowerCase()) || (j?.players||[])[0];
        if (hit?.id) return hit.id;
      }
    }catch(e){}

    // fallback: stats people (may be unreliable from some edges)
    try{
      const r = await fetch(`${NHL_STAT}/api/v1/people?fullName=${encodeURIComponent(name)}`);
      if (r.ok){
        const j = await r.json();
        return j?.people?.[0]?.id ?? null;
      }
    }catch(e){}

    return null;
  };

  // Quick self-test in console
  console.log('[Patch] Using /v1/player/{id}/landing for season stats');
})();
</script>

<script>
// --- FINAL PATCH: Use ONLY NHL Web search + player landing (no Stats API calls) ---
(function(){
  
  const PROXY   = 'https://pederson-neely.ariswinkleman.workers.dev';
  const NHL_WEB = `${PROXY}/nhl-web`;
  const HEADSHOT = (id, size=168) => `${PROXY}/img/headshots/current/${size}x${size}/${id}.jpg`;
  const PLACEHOLDER = 'https://via.placeholder.com/168?text=No+Image';


  // Optional hardcoded IDs to speed up
  window.PLAYER_ID = Object.assign(window.PLAYER_ID || {}, {
    "Cam Neely": 8449812,
    "Barry Pederson": 8450271,
    "Glen Wesley": 8452371,
    "Kyle McLaren": 8462040,
    "Sergei Samsonov": 8466035,
    "Jeff Hackett": 8447449,
    "Brad Boyes": 8468504,
    "Milan Lucic": 8473473,
    "Martin Jones": 8474889,
    "Jeff Jillson": 8467887,
    "Marty Reasoner": 8464967,
    "Yan Stastny": 8470223,
    "Dennis Wideman": 8469770,
    "Nathan Horton": 8470596,
    "Gregory Campbell": 8470169
  });

  async function fetchJSON(url, {timeoutMs=10000} = {}){
    const ctrl = new AbortController();
    const t = setTimeout(()=>ctrl.abort(), timeoutMs);
    try{
      const res = await fetch(url, {signal: ctrl.signal, credentials:'omit'});
      if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);
      return await res.json();
    } finally { clearTimeout(t); }
  }

  // Robust ID finder using api-web search
  window.findNhlPersonId = async function(name){
    const j = await fetchJSON(`${NHL_WEB}/v1/search/player?culture=en-us&limit=10&q=${encodeURIComponent(name)}`);
    const lower = name.toLowerCase();
    const hit = (j?.players||[]).find(p => (p?.name||'').toLowerCase() === lower) || (j?.players||[])[0];
    return hit?.id || null;
  };

  // Season-by-season stats from landing
  window.getSeasonStats = async function(name){
    const id = (window.PLAYER_ID && window.PLAYER_ID[name]) || await window.findNhlPersonId(name);
    if (!id) throw new Error("Couldn't resolve player ID.");
    const j = await fetchJSON(`${NHL_WEB}/v1/player/${id}/landing`);
    const seasons = j?.seasons || j?.seasonTotals || [];
    const rows = seasons.map(s => {
      const season8 = (s.seasonId || s.season || '').toString();
      const season = season8 && season8.length===8 ? `${season8.slice(0,4)}-${season8.slice(4)}` : (season8||'');
      const team = s.teamName || s.teamAbbrev || s.team || '';
      const gp = s.gamesPlayed ?? s.gp ?? s.games ?? 0;
      const g  = s.goals ?? s.g ?? 0;
      const a  = s.assists ?? s.a ?? 0;
      const pim= s.pim ?? 0;
      const pm = (typeof s.plusMinus === 'number') ? s.plusMinus : undefined;
      return { season, team, gp, g, a, pim, pm };
    }).filter(r => r.gp);
    if (!rows.length) throw new Error('No NHL seasons found on landing.');
    return rows;
  };

  // Photo resolver (headshot CDN by NHL ID, fallback to existing thumb/placeholder)
  window.getPlayerPhotoUrl = async function(name, fallbackThumb){
    const id = (window.PLAYER_ID && window.PLAYER_ID[name]) || await window.findNhlPersonId(name);
    if (id) return HEADSHOT(id, 168);
    return fallbackThumb || PLACEHOLDER;
  };

  console.log('[Landing-only] Using api-web search + player landing endpoints only.');
})();
</script>
</body>
</html>